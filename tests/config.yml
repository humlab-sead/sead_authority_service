options:
  id_base: "https://w3id.org/sead/id/"
  auto_accept_threshold: 0.90
  default_query_limit: 10
  database:
    host: humle.dumle.japp.ouch
    dbname: smurfs
    user: holamundo
    port: 9999
policy:
  site:
    proximity_boost:
      very_near_distance_km: 0.2
      to_far_distance_km: 10.0
    place_name_similarity_boost:
      similarity_threshold: 0.3
      max_boost: 0.1
  modification_type:
    lookup_format: "json"
    lookup_fields_map:
      id: "modification_type_id"
      label: "modification_type_name"
      description: "modification_type_description"
    entity_type_description: "modification type"
    roles: 
      - role: system
        content: You are archaeological specialist with expertise in identifying and classifying archaeological samples based on their features and characteristics.
    context: |
      You are provided with known modification types, each with an id, a label and a description.
    output:
      format: json
llm:
  provider: "ollama"  # or "anthropic", "ollama"
  max_tokens: 10000
  temperature: 0.1
  enable_translation: true
  enable_semantic_matching: true
  translation_target_lang: "en"
  semantic_batch_size: 50
  openai:
    model: "gpt-3.5-turbo"
    provider_id: "openapi"
    api_key: "${OPENAI_API_KEY}"
    options:
      temperature: 0.1
      max_tokens: 10000
  ollama:
    provider_id: "ollama"
    model: "gpt-oss:20b"
    host: "${OLLAMA_BASE_URL}"
    timeout: 30
    options:
      temperature: 0.1
      # max_tokens: 9999
      num_predict: 4096
  anthropic:
    provider_id: "anthropic"
    model: "claude-2"  
    api_key: "${ANTHROPIC_API_KEY}"
    options:
      temperature: 0.1
      max_tokens: 1000
  prompts:
    language_detection: |
      Detect the language of the following text. Respond with the ISO 639-1 language code (e.g., "en" for English, "fr" for French, "de" for German, "sv" for Swedish).

      Text:
      "{text}"

    translation: |
      Translate the following text line by line from {source_lang} to {target_lang}.

      Context:
      {context}

      Guidelines:
      - Keep the translation natural and fluent.
      - Preserve proper nouns, names, and technical terms when appropriate.
      - Use the most common or widely recognized form in the target language if one exists.
      - Maintain the same number of lines as the input.

      Text to translate:
      {text}

    abbreviation: |
      Expand the following abbreviations line by line.

      Each line in the input follows the format:
      "id, abbreviation"

      The text may include multiple languages.
      
      {context}

      Your task:
      - Expand each abbreviation into its full form based on the given context.
      - Preserve proper nouns, names, and original capitalization when appropriate.
      - Output one line per input line, using the format:
        "id, expanded-abbreviation"

      Input abbreviations:
      {data}

    reconciliation: |
      You are reconciling input values against a controlled list of {{ entity_type }}.
      Return ONLY strict JSON. No prose.

      Context:
      {{ context }}

      Lookup data ({{ lookup_format }} objects with fields: id, label, description):
      {{ lookup_data }}

      Input values ({{ lookup_format }}, preserve order):
      {{ data }}

      Task:
      For each input, return up to 5 candidate matches from the lookup, ordered best→worst.

      Output JSON must be an array where each element is:
      {
        "input_id": "<string>",
        "input_value": "<string>",
        "candidates": [
          { "id": "<lookup id as string>", "value": "<lookup label verbatim>", "score": 0.00, "reasons": ["...","..."] }
        ]
      }

      Rules:
      - Use ONLY ids/labels from the lookup (do not invent).
      - Copy the lookup's **label** into the candidate **value** verbatim.
      - If no reasonable match, return "candidates": [].
      - Scores are in [0,1], **rounded to two decimals**.
      - Provide **2–4 short** reason bullets per candidate.
      - Treat text comparison as **case- and diacritic-insensitive**.
      - Return **ONLY** valid JSON (no comments, no trailing commas, no extra text).

      Scoring considerations:
      - String similarity (normalization, diacritics, casing)
      - Abbreviation/alias/lemmatization expansion
      - Domain/context alignment (terminology fit)
      - Language variants and most common target-language form
      - Penalize partial/ambiguous overlaps and mismatched domain terms

logging:
  folder: ./logs
  handlers:
    - sink: "import_excel.log"
      level: "DEBUG"
      format: "{time} - {level} - {message}"
    - sink: "sys.stdout"
      level: "DEBUG"
      format: "{time} - {level} - {message}"
